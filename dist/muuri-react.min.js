/**
* Muuri-react v3.1.5
* https://paol-imi.github.io/muuri-react
* Copyright (c) 2020-present, Paol-imi
* Released under the MIT license
* https://github.com/Paol-imi/muuri-react/blob/master/LICENSE
* @license MIT
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("muuri"),require("react")):"function"==typeof define&&define.amd?define(["exports","muuri","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MuuriReact={},e.Muuri,e.React)}(this,(function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="default"in n?n.default:n;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="_component";function a(e){return!!e[i]}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t){a(e)?Object.assign(e[i],t):e[i]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}function l(e){return e[i]}function c(e){e._component=null}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function g(e,t){return e(t={exports:{}},t.exports),t.exports}t.prototype.getId=function(){return l(this).id},t.prototype.getGroupIds=function(){return l(this).groupIds},t.prototype.getSizerElement=function(){return l(this).sizerElement},t.Item.prototype.getKey=function(){return l(this).key},t.Item.prototype.getProps=function(){return l(this).props},t.Item.prototype.getData=function(){return l(this).data},t.Item.prototype.setData=function(e){l(this).data=e};var h=g((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case u:return e;default:return t}}case h:case g:case o:return t}}}function y(e){return m(e)===f}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=h,t.Memo=g,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===f||e===s||e===a||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===g||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d)},t.isAsyncMode=function(e){return y(e)||m(e)===c},t.isConcurrentMode=y,t.isContextConsumer=function(e){return m(e)===l},t.isContextProvider=function(e){return m(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return m(e)===d},t.isFragment=function(e){return m(e)===i},t.isLazy=function(e){return m(e)===h},t.isMemo=function(e){return m(e)===g},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===s},t.isStrictMode=function(e){return m(e)===a},t.isSuspense=function(e){return m(e)===p}}));p(h);h.typeOf,h.AsyncMode,h.ConcurrentMode,h.ContextConsumer,h.ContextProvider,h.Element,h.ForwardRef,h.Fragment,h.Lazy,h.Memo,h.Portal,h.Profiler,h.StrictMode,h.Suspense,h.isValidElementType,h.isAsyncMode,h.isConcurrentMode,h.isContextConsumer,h.isContextProvider,h.isElement,h.isForwardRef,h.isFragment,h.isLazy,h.isMemo,h.isPortal,h.isProfiler,h.isStrictMode,h.isSuspense;var m=g((function(e,t){}));p(m);m.typeOf,m.AsyncMode,m.ConcurrentMode,m.ContextConsumer,m.ContextProvider,m.Element,m.ForwardRef,m.Fragment,m.Lazy,m.Memo,m.Portal,m.Profiler,m.StrictMode,m.Suspense,m.isValidElementType,m.isAsyncMode,m.isConcurrentMode,m.isContextConsumer,m.isContextProvider,m.isElement,m.isForwardRef,m.isFragment,m.isLazy,m.isMemo,m.isPortal,m.isProfiler,m.isStrictMode,m.isSuspense,g((function(e){e.exports=h}));var y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function C(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign,Function.call.bind(Object.prototype.hasOwnProperty);function O(){}function _(){}_.resetWarningCache=O;var S=g((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_,resetWarningCache:O};return n.PropTypes=n,n}()})),w=n.createContext({}),P=w.Provider,R=function(){return n.useContext(w)};w.displayName="GridProvider";var T=n.createContext({}),E=T.Provider,I=function(){return n.useContext(T)};function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),e}T.displayName="ItemProvider";var k=function(){function e(){j(this,e),o(this,"_eventsMap",new Map),o(this,"_payloadsMap",new Map)}return x(e,[{key:"enableEvent",value:function(e,t){this._eventsMap.set(e,t)}},{key:"emitEvent",value:function(e,t){this.isEnabled(e)&&(this._payloadsMap.set(e,t),this._eventsMap.get(e)())}},{key:"getPayload",value:function(e){return this._payloadsMap.get(e)}},{key:"isEnabled",value:function(e){return this._eventsMap.has(e)}},{key:"destroy",value:function(){this._eventsMap.clear(),this._payloadsMap.clear()}}]),e}(),M=function(){function e(){j(this,e),o(this,"_requests",[])}return x(e,[{key:"useInit",value:function(){this._requests=[]}},{key:"emit",value:function(e){for(var t=0;t<this._requests.length;t++)this._requests[t](e[t])}},{key:"requestItem",value:function(e){this._requests.push(e)}},{key:"destroy",value:function(){this._requests=[]}}]),e}();function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e,t,n){return(q=H()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&A(o,n.prototype),o}).apply(null,arguments)}function L(e){var t="function"==typeof Map?new Map:void 0;return(L=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return q(e,arguments,G(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),A(r,e)})(e)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(n,e);var t=$(n);function n(e){var r;return j(this,n),(r=t.call(this,e)).name="Invariant",r}return n}(L(Error));function N(e,t){if(!e)throw new z("Invariant failed")}var V=function(){function e(){j(this,e),o(this,"_item",null),o(this,"_instance",{})}return x(e,[{key:"set",value:function(e,t){this._item?u(this._item,o({},e,t)):this._instance[e]=t}},{key:"get",value:function(e){return this._item?l(this._item)[e]:this._instance[e]}},{key:"delete",value:function(){this._item&&c(this._item)}},{key:"setItem",value:function(e){this._item=e,u(this._item,this._instance),this._instance={}}},{key:"getItem",value:function(){return N(null!==this._item),this._item}},{key:"hasItem",value:function(){return null!==this._item}},{key:"destroy",value:function(){this._item=null,this._instance={}}}]),e}(),U=function(){function e(){j(this,e),o(this,"_itemsToRemove",[])}return x(e,[{key:"useInit",value:function(){this._itemsToRemove=[]}},{key:"removeItem",value:function(e){this._itemsToRemove.push(e)}},{key:"getItemsToRemove",value:function(){return this._itemsToRemove}},{key:"destroy",value:function(){this._itemsToRemove=[]}}]),e}(),W=function(){function e(){j(this,e),o(this,"_itemsToRefresh",void 0),o(this,"_itemsToShow",void 0),o(this,"_itemsToHide",void 0),o(this,"_isRendering",void 0),this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!1}return x(e,[{key:"useInit",value:function(){var e=this;this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!0,n.useEffect((function(){e._isRendering=!1}))}},{key:"refreshItem",value:function(e){if(this._isRendering)this._itemsToRefresh.push(e);else{var t=e.getGrid();t.refreshItems([e]),t.layout()}}},{key:"setItemVisibility",value:function(e,t,n){if(this._isRendering)t?this._itemsToShow.push(e):this._itemsToHide.push(e);else{var r=e.getGrid();t?r.show([e],{instant:n}):r.hide([e],{instant:n})}}},{key:"getItemsToRefresh",value:function(){return this._itemsToRefresh}},{key:"getItemsToShow",value:function(){return this._itemsToShow}},{key:"getItemsToHide",value:function(){return this._itemsToHide}},{key:"destroy",value:function(){this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[]}}]),e}(),B=function(){function e(){j(this,e),o(this,"_fiber",void 0),o(this,"_flag","0")}return x(e,[{key:"useInit",value:function(e){var t=this;this.updateFlag(),n.useEffect((function(){N(null!==e.current),t._fiber=function(e){var t=Object.keys(e).find((function(e){return e.startsWith("__reactInternalInstance$")}));return N("string"==typeof t),e[t]}(e.current)}),[])}},{key:"getStateNodes",value:function(e){var t=[];if(0===e.length)return t;var n=Y(this._fiber,this._flag).child;return e.forEach((function(e){for(;n.index!==e;)n=n.sibling;t.push(function(e){var t=e.child.child;for(;!(t.stateNode instanceof HTMLElement);)t=t.child;return t.stateNode}(n))})),t}},{key:"append",value:function(e){var t=Y(this._fiber,this._flag);Z(t,e),t.alternate&&e.alternate&&Z(t.alternate,e.alternate)}},{key:"remove",value:function(e){var t=Y(this._fiber,this._flag),n=J(t,e);return t.alternate&&n.alternate&&J(t.alternate,e),n}},{key:"getFlagProp",value:function(){return o({},K,this._flag)}},{key:"updateFlag",value:function(){"0"===this._flag?this._flag="1":this._flag="0"}},{key:"destroy",value:function(){this._fiber=null}}]),e}(),K="muuri-react-flag";function Y(e,t){if(!e.alternate)return e;var n=e.memoizedProps[K];if(n===e.alternate.memoizedProps[K]){for(var r=e;r.return;)r=r.return;return r.stateNode.current===r?e:e.alternate}return n===t?e:e.alternate}function Z(e,t){var n;if(e.child){for(var r=e.child;r.sibling;)r=r.sibling;t.index=r.index+1,r.sibling=t}else e.child=t,t.index=0;t.return=e,t._debugOwner&&(t._debugOwner=null===(n=e.return)||void 0===n?void 0:n.return)}function J(e,t){var n,r,o,i=e.child;if(X(i,t)){for(;X(i.sibling,t);)i=i.sibling;o=(r=i).sibling,r.sibling=r.sibling.sibling,n=o,Q(i)}else n=function(e){var t=e.child;return e.child=e.child.sibling,t}(e),(i=i.sibling)&&Q(i);return n.sibling=null,n}function Q(e){for(;e.sibling;)e.sibling.index=e.index+1,e=e.sibling}function X(e,t){return e.child.child.key!==t}var ee=function(){function e(){j(this,e),o(this,"_oldChildrenArray",[]),o(this,"_children",[]),o(this,"_indicesToAdd",[]),o(this,"_dragCounter",0)}return x(e,[{key:"useInit",value:function(e){var t=n.Children.toArray(e);this._indicesToAdd=te(t,this._oldChildrenArray),this._children=e||[],this._oldChildrenArray=t}},{key:"remove",value:function(e){return this._oldChildrenArray.splice(e,1)[0]}},{key:"append",value:function(e){this._oldChildrenArray.push(e)}},{key:"getIndicesToAdd",value:function(){return this._indicesToAdd}},{key:"render",value:function(e){var t=n.Children.map(this._children,(function(t){return e(t,t.key)}));return this.flush(),t}},{key:"incrementDragCounter",value:function(){this._dragCounter+=1}},{key:"decrementDragCounter",value:function(){this._dragCounter-=1}},{key:"flush",value:function(){this._children=[]}},{key:"destroy",value:function(){this.flush()}}]),e}();function te(e,t){for(var n=[],r=0,o=0;o<e.length;o++){var i=ne(t,e[o],r);-1===i?n.push(o):r=i}return n}function ne(e,t,n){for(var r=n=n>e.length?e.length:n;r<e.length;r++)if(re(t,e[r]))return r;for(var o=0;o<n;o++)if(re(t,e[o]))return o;return-1}function re(e,t){return e.key===t.key}var oe=["relative","absolute","fixed"];function ie(e){return n.useRef(e).current}function ae(e){var t=n.useRef(e);if(t.current===e)return!0;var r=function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(t.current,e);return t.current=e,r}function se(e){var t=n.useRef();return t.current||(t.current=e()),t.current}function ue(){var e=n.useState()[1];return ie((function(){e(Object.create(null))}))}function le(e){var t=e.children,o=e.itemClasses,i=e.itemAddController,a=e.itemRemoveController,s=e.propsToData,l=e.itemKey,c=e.grid,f=se((function(){var e=new k,t=new V;return t.set("key",l),t.set("eventController",e),{eventController:e,itemRefController:t,itemRemoveController:a,grid:c}}));if(f.itemRefController.set("props",t.props),f.itemRemoveController=a,f.grid=c,s){var p=s(t.props);N("object"===d(p),"The data returned by 'propsToData' must be an object, founded ".concat(d(p))),f.itemRefController.set("data",p)}return n.useEffect((function(){return i.requestItem((function(e){!function(e){u(e,{props:{},data:{}}),Object.defineProperty(e,"_sortData",{get:function(){return this.getData()},set:function(){}})}(e),function(e,t){e.style.position="absolute";var n=e.setAttribute.bind(e);e.setAttribute=function(r,o){if("class"===r){var i=(e.getAttribute("class")||"").split(" ").filter((function(e){return t.includes(e)}));o="".concat(o," ").concat(i.join(" "))}n(r,o)}}(e.getElement(),o),f.itemRefController.setItem(e)})),function(){var e=f.itemRefController.getItem();N(null!==e);var t=e.getElement();N(void 0!==t),e.isDragging()&&(t.style.display="none",t.style.visibility="hidden",e._drag&&e._drag.destroy(),f.grid.getElement().appendChild(t)),f.itemRefController.delete(),f.itemRemoveController.removeItem(e),f.itemRefController.destroy(),f.eventController.destroy()}}),[]),r.createElement(E,{value:f},t)}le.propTypes={itemAddController:S.object.isRequired,itemClasses:S.arrayOf(S.string.isRequired).isRequired,propsToData:S.func,children:S.element.isRequired,grid:S.instanceOf(t).isRequired},le.displayName="ItemComponent";function ce(e){return e._settings.containerClass}var fe=["itemClass","itemVisibleClass","itemHiddenClass","itemPositioningClass","itemDraggingClass","itemReleasingClass","itemPlaceholderClass"];function de(e){return fe.map((function(t){return e._settings[t]}))}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){n=ge(ge({},n||{}),{},{layout:!1}),"function"==typeof t&&function(e,t,n){e.sort((function(e,n){return t(e.getData(),n.getData(),e,n)}),n)}(e,t,n),"string"==typeof t&&function(e,t,n){e.sort(t,n)}(e,t,n),Array.isArray(t)&&function(e,t,n){var r=e.getItems(),o=[],i=[];r.forEach((function(e){var n=e._component.key,r=t.findIndex((function(e){return e===n}));r>-1?o[r]=e:i.push(e)})),e.sort(Array.prototype.concat(o.filter((function(e){return!!e})),i),n)}(e,t,n)}function me(e){var t=e.children,o=e.gridProps,i=e.grid,s=e.filter,c=e.sort,p=e.sortOptions,g=e.addOptions,h=e.propsToData,m=e.onSend,y=e.onDragStart,v=e.onDragEnd,b=e.onFilter,C=e.onSort,O=e.onMount,_=e.onUnmount,S=e.forceSync,w=e.dragFixed,R=e.dragEnabled,T=e.instantLayout,E=se((function(){return{gridRef:n.createRef(),gridClass:ce(i),itemClasses:de(i),childrenController:new ee,fiberController:new B,itemAddController:new M,itemRemoveController:new U,layoutController:new W,onUnmount:_,onDragStart:y,onDragEnd:v,onFilter:b,onSort:C,onSend:m}})),I={indicesToAdd:[],addedDOMItems:[],itemsToRemove:[],itemsToRefresh:[],itemsToShow:[],itemsToHide:[],hasAdded:!1,hasRemoved:!1,hasFiltered:!1,hasSorted:!1,hasRefreshed:!1,hasShown:!1,hasHidden:!1};n.useEffect((function(){return i.on("beforeSend",(function(e){var t=e.item,n=e.fromGrid,r=e.fromIndex;l(t).sentPayload||u(t,{sentPayload:{fromChildrenController:E.childrenController,fromFiberController:E.fiberController,fromGrid:n,fromIndex:r}})})).on("receive",(function(e){var t=e.item,n=e.toGrid,r=e.toIndex,o=E.childrenController,a=E.fiberController;if(t.isDragging()){u(t,{receivedPayload:{toChildrenController:o,toFiberController:a,toGrid:n,toIndex:r}})}else{var s=l(t).sentPayload;N(null!==s&&"object"===d(s));var c=s.fromChildrenController,f=s.fromFiberController;u(t,{sentPayload:null});var p=f.remove(t.getKey()),g=c.remove(p.index);a.append(p),o.append(g)}l(t).eventController.emitEvent("send",i)})).on("dragInit",(function(e,t){E.childrenController.incrementDragCounter(),l(e).eventController.emitEvent("drag",!0),E.onDragStart&&E.onDragStart(e,t)})).on("dragEnd",(function(e){var t=l(e).sentPayload,n=l(e).receivedPayload;if(t&&n){var r=t.fromChildrenController,o=t.fromFiberController,i=t.fromGrid,a=t.fromIndex,s=n.toChildrenController,c=n.toFiberController,f=n.toGrid,d=n.toIndex;if(u(e,{sentPayload:null,receivedPayload:null}),i!==f){N("function"==typeof E.onSend);var p=o.remove(e.getKey()),g=r.remove(p.index);c.append(p),s.append(g),E.onSend({key:l(e).key,fromGrid:i,fromIndex:a,fromId:l(i).id,fromGroupIds:l(i).groupIds,toGrid:f,toIndex:d,toId:l(f).id,toGroupIds:l(f).groupIds})}}})).on("dragReleaseEnd",(function(e){E.childrenController.decrementDragCounter(),l(e).eventController.emitEvent("drag",!1),E.onDragEnd&&E.onDragEnd(e)})).on("showStart",(function(e){a(e[0])&&e.forEach((function(e){var t=l(e).eventController;!0!==t.getPayload("show")&&t.emitEvent("show",!0)}))})).on("hideEnd",(function(e){e.forEach((function(e){var t=l(e).eventController;!1!==t.getPayload("show")&&t.emitEvent("show",!1)}))})).on("filter",(function(e,t){E.onFilter&&E.onFilter(e,t)})).on("sort",(function(e,t){E.onSort&&E.onSort(e,t)})),w&&i.on("dragInit",(function(e){var t=e.getElement();N(void 0!==t);var n=getComputedStyle(t),r=n.width,o=n.height,i=n.paddingTop;u(e,{dragWidth:t.style.width,dragHeight:t.style.height,dragPaddingTop:t.style.paddingTop}),t.style.width=r,t.style.height=o,t.style.paddingTop=i})).on("dragReleaseEnd",(function(e){var t=e.getElement();N(void 0!==t);var n=l(e),r=n.dragWidth,o=n.dragHeight,i=n.dragPaddingTop;t.style.width=r,t.style.height=o,t.style.paddingTop=i})),N(null!==E.gridRef.current),i._element=E.gridRef.current,function(e,t){var n=getComputedStyle(e).position;oe.includes(n)||(e.style.position=oe[0]),e.classList.add(t);var r=e.setAttribute.bind(e);e.setAttribute=function(n,o){"class"===n&&((e.getAttribute("class")||"").split(" ").includes(t)||(o="".concat(o," ").concat(t)));r(n,o)}}(E.gridRef.current,E.gridClass),function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.classList.add("grid-sizer"),u(e,{sizerElement:t});var n=e.getElement();0===n.children.length?n.appendChild(t):n.insertBefore(t,n.children[0])}(i),O&&O(i),function(){E.childrenController.destroy(),E.fiberController.destroy(),E.itemRemoveController.destroy(),E.itemAddController.destroy(),E.layoutController.destroy()}}),[]),E.childrenController.useInit(t),E.fiberController.useInit(E.gridRef),E.itemRemoveController.useInit(),E.itemAddController.useInit(),E.layoutController.useInit();var j=ae([s]),D=ae([c,p]);n.useEffect((function(){u(i,{dragEnabled:R}),I.indicesToAdd=E.childrenController.getIndicesToAdd(),I.addedDOMItems=E.fiberController.getStateNodes(I.indicesToAdd),I.itemsToRemove=E.itemRemoveController.getItemsToRemove(),I.itemsToRefresh=E.layoutController.getItemsToRefresh(),I.itemsToShow=E.layoutController.getItemsToShow(),I.itemsToHide=E.layoutController.getItemsToHide(),E.onUnmount=_,E.onDragStart=y,E.onDragEnd=v,E.onFilter=b,E.onSort=C,E.onSend=m})),n.useEffect((function(){if(I.itemsToRemove.length&&(!function(e,t){e.remove(t,{layout:!1,removeElements:!1})}(i,I.itemsToRemove),I.hasRemoved=!0),I.indicesToAdd.length){!function(e,t,n,r,o){for(var i=0;i<t.length;i++)e.add(t[i],{index:n[i],layout:!1,active:null==r?void 0:r.active});!o&&(null==r?void 0:r.show)&&e.show(e.getItems(n),{layout:!1})}(i,I.addedDOMItems,I.indicesToAdd,g,s);var e=i.getItems(I.indicesToAdd);E.itemAddController.emit(e),I.hasAdded=!0}s&&(j||I.hasAdded||S)&&(!function(e,t){e.filter((function(e){return t(e.getData(),e)}),{layout:!1})}(i,s),I.hasFiltered=!0),c&&(D||I.hasAdded||S)&&(he(i,c,p),I.hasSorted=!0),!s&&I.itemsToShow.length&&(!function(e,t){e.show(t,{layout:!1})}(i,I.itemsToShow),I.hasShown=!0),!s&&I.itemsToHide.length&&(!function(e,t){e.hide(t,{layout:!1})}(i,I.itemsToHide),I.hasHidden=!0),I.itemsToRefresh.length&&(i.refreshItems(I.itemsToRefresh),I.hasRefreshed=!0),(I.hasAdded||I.hasRemoved||I.hasSorted||I.hasFiltered||I.hasRefreshed||I.hasShown||I.hasHidden)&&i.layout(T)}));var x=se((function(){return{layoutController:E.layoutController,grid:i}}));return r.createElement(P,{value:x},r.createElement("div",f({},o,{ref:E.gridRef},E.fiberController.getFlagProp()),E.childrenController.render((function(e,t){return r.createElement(le,{key:t,itemKey:t,grid:i,propsToData:h,itemClasses:E.itemClasses,itemAddController:E.itemAddController,itemRemoveController:E.itemRemoveController},e)}))))}function ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}me.propTypes={grid:S.object.isRequired,gridProps:S.object,filter:S.oneOfType([S.string,S.func]),sort:S.oneOfType([S.string,S.func,S.arrayOf(S.string)]),sortOptions:S.exact({descending:S.bool}),addOptions:S.exact({show:S.bool,active:S.bool}),onSend:S.func,onDragStart:S.func,onDragEnd:S.func,onFilter:S.func,onSort:S.func,onMount:S.func,onUnmount:S.func,forceSync:S.bool,dragFixed:S.bool,dragEnabled:S.bool,instantLayout:S.bool},me.defaultProps={gridProps:{},addOptions:{show:!0},sortOptions:{descending:!1},forceSync:!1,dragFixed:!1,dragEnabled:!1,instantLayout:!1},me.displayName="GridComponent";var ve=function(){function e(){j(this,e),o(this,"_idMap",new Map),o(this,"_groupMap",new Map)}return x(e,[{key:"get",value:function(e){return this._idMap.get(e)||null}},{key:"getGroup",value:function(e){var t=this._groupMap.get(e);if(t)return t;var n=[];return this._groupMap.set(e,n),n}},{key:"getAll",value:function(){return Array.from(this._idMap.values())}},{key:"set",value:function(e,t){return this._idMap.set(t,e),this}},{key:"setGroup",value:function(e,t){var n=this._groupMap.get(t);return n?n.push(e):this._groupMap.set(t,[e]),this}},{key:"delete",value:function(e){return this._idMap.delete(e),this}},{key:"deleteGroup",value:function(e,t){var n=this._groupMap.get(t);if(n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this}},{key:"clear",value:function(){return this._idMap.clear(),this._groupMap.clear(),this}}]),e}(),be=new ve;function Ce(e,t){e&&("function"==typeof e?e(t):"current"in e&&(e.current=t))}function Oe(e){return e instanceof HTMLElement||e instanceof window.constructor}function _e(e){var n=function(e){return"function"==typeof e?e:function(n,r){return t.ItemDrag.defaultStartPredicate(n,r,e)}}(e.dragStartPredicate);e.dragStartPredicate=function(e,t){return!!l(e.getGrid()).dragEnabled&&((!a(e)||!1!==l(e).draggable)&&n(e,t))}}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=n.forwardRef((function(e,o){var i,a,s,l=e.children,f=e.id,p=e.groupIds,g=e.gridProps,h=e.filter,m=e.sort,y=e.sortOptions,v=e.addOptions,b=e.propsToData,C=e.onSend,O=e.onDragStart,_=e.onDragEnd,S=e.onFilter,w=e.onSort,P=e.onMount,R=e.onUnmount,T=e.forceSync,E=e.dragFixed,I=e.dragEnabled,j=e.instantLayout,D=ye(e,["children","id","groupIds","gridProps","filter","sort","sortOptions","addOptions","propsToData","onSend","onDragStart","onDragEnd","onFilter","onSort","onMount","onUnmount","forceSync","dragFixed","dragEnabled","instantLayout"]),x=se((function(){D.items=[],D.dragEnabled=null!==I,function(e){var t=e.dragContainer,n={current:null};Object.defineProperty(e,"dragContainer",{get:function(){return n.current},set:function(e){!e||e instanceof Element?n.current=e:n=e}}),e.dragContainer=t}(D),function(e,t){var n=e.dragSort;if(n&&"object"===d(n)){N("string"==typeof n.groupId);var r=t.getGroup(n.groupId);e.dragSort=function(){return r}}}(D,be),function(e){var t=e.dragAutoScroll;t&&Array.isArray(t.targets)&&t.targets.forEach((function(e){if(!Oe(e)){N("element"in e);var t=e.element,n={current:null};Object.defineProperty(e,"element",{get:function(){return n.current},set:function(e){Oe(e)?n.current=e:n=e}}),e.element=t}}))}(D),_e(D);var e=function(e){var n=document.createElement("div");n.style.display="none",document.body.appendChild(n);var r=new t(n,e);return document.body.removeChild(n),r}(D);return f&&be.set(e,f),u(e,{id:f}),Ce(o,e),e}));return n.useEffect((function(){return function(){Ce(o,null),c(x),f&&be.delete(f),x.destroy()}}),[]),i=function(){return u(x,{groupIds:p}),p&&p.forEach((function(e){be.setGroup(x,e)})),function(){p&&p.forEach((function(e){be.deleteGroup(x,e)}))}},a=ae(p||[]),s=n.useRef(),a&&(s.current&&s.current(),s.current=i()),n.useEffect((function(){return function(){s.current&&s.current()}}),[]),r.createElement(me,{grid:x,gridProps:g,filter:h,sort:m,sortOptions:y,addOptions:v,propsToData:b,onSend:C,onDragStart:O,onDragEnd:_,onFilter:S,onSort:w,onMount:P,onUnmount:R,forceSync:T,dragFixed:E,dragEnabled:I,instantLayout:j},l)}));function Re(e,t){var n=I().itemRefController;N(void 0!==n);var r=ie((function(e,t){if(N("object"===d(e),"The data must be an object, founded: ".concat(d(e))),(t=t||Re.defaultOptions).merge){var r=n.get("data")||{};n.set("data",Object.assign(r,e))}else n.set("data",e)}));return"object"===d(e)&&r(e,t),r}function Te(){var e=I().eventController,t=ue();return N(void 0!==e),n.useEffect((function(){e.enableEvent("drag",t)}),[e,t]),e.getPayload("drag")||!1}function Ee(){var e=I().itemRefController;return N(void 0!==e),ie((function(t){e.set("draggable",!!t)}))}function Ie(){var e=I().eventController,t=R(),r=ue();N(void 0!==e&&void 0!==t.grid);var o=e.getPayload("send")||t.grid;return n.useEffect((function(){e.enableEvent("send",r)}),[e,r]),{id:o._component.id,groupIds:o._component.groupIds,grid:o}}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=R(),r=t.layoutController,o=I(),i=o.itemRefController;N(void 0!==i&&void 0!==r);var a=n.useCallback((function(){if(i.hasItem()){var e=i.getItem();r.refreshItem(e)}}),[r,i]);return n.useEffect((function(){a()}),e.concat(a)),a}function De(){var e=I().eventController,t=ue();return N(void 0!==e),n.useEffect((function(){e.enableEvent("show",t)}),[e,t]),e.getPayload("show")}function xe(){var e=R().layoutController,t=I(),n=t.eventController,r=t.itemRefController;return N(void 0!==r&&void 0!==e&&void 0!==n),ie((function(t,o){r.hasItem()&&!!t!==n.getPayload("show")&&(o=o||xe.defaultOptions,e.setItemVisibility(r.getItem(),t,!0===o.instant))}))}Pe.propTypes={id:S.string,groupIds:S.arrayOf(S.string.isRequired),showDuration:S.number,showEasing:S.string,hideDuration:S.number,hideEasing:S.string,visibleStyles:S.shape({}),hiddenStyles:S.shape({}),layout:S.oneOfType([S.func,S.exact({fillGaps:S.bool,horizontal:S.bool,alignRight:S.bool,alignBottom:S.bool,rounding:S.bool})]),layoutOnResize:S.oneOfType([S.bool,S.number]),layoutDuration:S.number,layoutEasing:S.string,dragContainer:S.oneOfType([S.instanceOf(HTMLElement),S.shape({current:S.instanceOf(HTMLElement).isRequired})]),dragStartPredicate:S.oneOfType([S.func,S.exact({distance:S.number,delay:S.number,handle:S.oneOfType([S.string,S.bool])})]),dragAxis:S.oneOf(["x","y","xy"]),dragSort:S.oneOfType([S.bool,S.func,S.exact({groupId:S.string.isRequired})]),dragSortHeuristics:S.exact({sortInterval:S.number,minDragDistance:S.number,minBounceBackAngle:S.number}),dragSortPredicate:S.oneOfType([S.func,S.exact({action:S.oneOf(["move","swap"]),migrateAction:S.oneOf(["move","swap"]),threshold:S.number})]),dragRelease:S.exact({duration:S.number,easing:S.string,useDragContainer:S.bool}),dragCssProps:S.exact({touchAction:S.string,userSelect:S.string,userDrag:S.string,tapHighlightColor:S.string,touchCallout:S.string,contentZooming:S.string}),dragPlaceholder:S.exact({enabled:S.bool,createElement:S.func,onCreate:S.func,onRemove:S.func,easing:S.string,duration:S.number}),containerClass:S.string,itemClass:S.string,itemVisibleClass:S.string,itemHiddenClass:S.string,itemPositioningClass:S.string,itemDraggingClass:S.string,itemReleasingClass:S.string,itemPlaceholderClass:S.string},Pe.defaultProps=we(we({},t.defaultOptions),{},{dragEnabled:null}),Pe.displayName="MuuriComponent",Re.defaultOptions={merge:!1},xe.defaultOptions={instant:!1};var ke=Object.freeze({__proto__:null,useData:Re,useDrag:Te,useDraggable:Ee,useGrid:Ie,useRefresh:je,useShow:De,useVisibility:xe});function Me(e){N("object"===d(e)),N("number"==typeof e.columns&&e.columns>0&&e.columns<=1),N("number"==typeof e.ratio||"number"==typeof e.height||"string"==typeof e.height),N("number"!=typeof e.ratio||"number"!=typeof e.height&&"string"!=typeof e.height);var t,n=function(e){"number"==typeof e&&(e="".concat(e,"px"));var t=e.trim().split(" "),n="0px",r="0px",o=0,i=0;1===t.length?n=r=t[0]:2===t.length||3===t.length?n=r=t[1]:4===t.length&&(n=t[3],r=t[1]);-1===n.indexOf("%")?i+=parseFloat(n):o+=parseFloat(n);-1===r.indexOf("%")?i+=parseFloat(r):o+=parseFloat(r);return{margin:e,mStatic:i,mDynamic:o}}(e.margin||"0px"),r=n.margin,o=n.mStatic,i=n.mDynamic,a=function(e,t,n){var r=0!==t,o=100*e-n,i=r?"".concat(o,"% - ").concat(t,"px"):"".concat(o,"%");return{needCalc:r,width:i}}(e.columns,o,i),s=a.needCalc,u=a.width;return e.ratio?{width:s?"calc(".concat(u,")"):u,paddingTop:Ae(u,e.ratio,s),height:"0px",borderWidth:"0px",margin:r}:{width:s?"calc(".concat(u,")"):u,paddingTop:"0px",height:(t=e.height,"number"==typeof t?"".concat(t,"px"):t),borderWidth:"0px",margin:r}}function Ae(e,t,n){return n?"calc((".concat(e,") / ").concat(t,")"):"".concat(parseFloat(e)/t,"%")}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Le=["useData","useDrag","useDraggable","useGrid","useRefresh","useShow","useVisibility"],$e=[["useData",ze("setData")],["useDrag",ze("isDragging")],["useDraggable",ze("setDraggable")],["useGrid",ze("gridData")],["useRefresh",ze("refresh")],["useShow",ze("isShowing")],["useVisibility",ze("setVisibility")]];function ze(e){return function(t){return o({},e,t)}}var Ne=t.AutoScroller,Ve=t.ItemDrag;e.AutoScroller=Ne,e.ChildrenController=ee,e.EventController=k,e.FiberController=B,e.FlagProp=K,e.GridComponent=me,e.GridContext=w,e.GridProvider=P,e.ItemAddController=M,e.ItemComponent=le,e.ItemContext=T,e.ItemDrag=Ve,e.ItemProvider=E,e.ItemRefController=V,e.ItemRemoveController=U,e.LayoutController=W,e.MuuriComponent=Pe,e.MuuriMap=ve,e.getHandler=ze,e.getIndicesToAdd=te,e.getResponsiveStyle=Me,e.getStaticStyle=function(e){var t=Me(e);N("grid"in e);var n=e.grid.getSizerElement();Object.assign(n.style,t);var r=window.getComputedStyle(n);return{width:r.width,height:r.height,paddingTop:r.paddingTop,margin:r.margin}},e.muuriMap=be,e.useData=Re,e.useDrag=Te,e.useDraggable=Ee,e.useGrid=Ie,e.useGridContext=R,e.useItemContext=I,e.useRefresh=je,e.useShow=De,e.useVisibility=xe,e.withHooks=function(e,t){N(Array.isArray(t)),t.forEach((function(e){N(Le.includes(e))})),N(0!==t.length);var n=$e.filter((function(e){var n=He(e,1)[0];return t.includes(n)}));return function(t){return r.createElement(e,f({},t,function(e){return Object.assign.apply(Object,[{}].concat(qe(e.map((function(e){var t=He(e,2),n=t[0];return(0,t[1])(ke[n]())})))))}(n)))}},Object.defineProperty(e,"__esModule",{value:!0})}));
